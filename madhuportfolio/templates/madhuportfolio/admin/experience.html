{% extends "madhuportfolio/admin/nav.html" %}
{% load static %}

{% block title %}Experience Section{% endblock %}

{% block content %}
<div class="container-fluid mt-4">

  <h2 class="mb-4">Experience Section</h2>

  <!-- Add / Update Experience Form -->
  <div class="card shadow-sm mb-5">
    <div class="card-header bg-info text-white">
      <h5 class="mb-0">{% if experience %}Update Experience{% else %}Add Experience{% endif %}</h5>
    </div>
    <div class="card-body">
      <form method="POST">
        {% csrf_token %}

        <!-- Role -->
        <div class="mb-3">
          <label for="role" class="form-label fw-bold">Role / Position</label>
          <input type="text" class="form-control" id="role" name="role"
                 placeholder="Enter role" 
                 value="{% if experience %}{{ experience.role }}{% endif %}" required>
        </div>

        <!-- Company -->
        <div class="mb-3">
          <label for="company" class="form-label fw-bold">Company</label>
          <input type="text" class="form-control" id="company" name="company"
                 placeholder="Enter company name"
                 value="{% if experience %}{{ experience.company }}{% endif %}" required>
        </div>

        <!-- Location -->
        <div class="mb-3">
          <label for="location" class="form-label fw-bold">Location</label>
          <input type="text" class="form-control" id="location" name="location"
                 placeholder="Enter location"
                 value="{% if experience %}{{ experience.location }}{% endif %}" required>
        </div>

        <!-- Start Date -->
        <div class="mb-3">
          <label for="start_date" class="form-label fw-bold">Start Date</label>
          <input type="date" class="form-control" id="start_date" name="start_date"
                 value="{% if experience %}{{ experience.start_date }}{% endif %}" required>
        </div>

        <!-- End Date -->
        <div class="mb-3">
          <label for="end_date" class="form-label fw-bold">End Date</label>
          <input type="date" class="form-control" id="end_date" name="end_date"
                 value="{% if experience %}{{ experience.end_date }}{% endif %}" required>
        </div>

        <!-- Description -->
        <div class="mb-3">
          <label for="description" class="form-label fw-bold">Description</label>
          <textarea class="form-control" id="description" name="description" rows="4"
                    placeholder="Enter experience description">{% if experience %}{{ experience.description }}{% endif %}</textarea>
        </div>

        <!-- Submit Button -->
        <button type="submit" class="btn btn-info">{% if experience %}Update{% else %}Add{% endif %}</button>
      </form>
    </div>
  </div>

  <!-- Existing Experience Table -->
  <div class="card shadow-sm">
    <div class="card-header bg-dark text-white">
      <h5 class="mb-0">All Experiences</h5>
    </div>
    <div class="card-body table-responsive">
      <table class="table table-bordered table-hover">
        <thead class="table-light">
          <tr>
            <th>#</th>
            <th>Role</th>
            <th>Company</th>
            <th>Location</th>
            <th>Start Date</th>
            <th>End Date</th>
            <th>Description</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          {% for e in all_experiences %}
          <tr>
            <td>{{ forloop.counter }}</td>
            <td>{{ e.role }}</td>
            <td>{{ e.company }}</td>
            <td>{{ e.location }}</td>
            <td>{{ e.start_date }}</td>
            <td>{{ e.end_date }}</td>
            <td>{{ e.description|truncatewords:15 }}</td>
            <td>
              <a href="{% url 'edit_experience' e.id %}" class="btn btn-sm btn-primary">Edit</a>
              <a href="{% url 'delete_experience' e.id %}" class="btn btn-sm btn-danger"
                 onclick="return confirm('Are you sure you want to delete this experience?');">Delete</a>
            </td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="7" class="text-center">No experiences added yet.</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>

</div>
{% endblock %}
